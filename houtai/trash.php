<?php
//Copyright (c) 2016 iFeiwu.com
 class Trash extends Item { function __construct() { $this->table = "\164\162\x61\x73\150"; parent::__construct(); } protected function postDelete($request_data) { goto gDaFZ; siKAc: $this->_log("\x64\x65\x6c\145\164\145", array("\164\151\x74\x6c\x65" => count($ids))); goto mTgf0; ANd5T: EdOlQ: goto px6iW; HBjmT: $this->db->commit(); goto siKAc; CflgA: $this->db->beginTransaction(); goto JH2wn; px6iW: if (count($error) === 0) { goto UBu2X; } goto cREeO; cREeO: $this->db->rollBack(); goto dQWIe; rDvLf: UBu2X: goto HBjmT; mTgf0: return $this->success(); goto DimNu; PYWDx: $ids = $request_data["\x69\144"]; goto CflgA; JH2wn: foreach ($ids as $id) { goto KlWU1; SYzAL: RCTg1: goto l7Ic4; OSkDX: if (!($path && count(explode("\57", $path)) >= 2)) { goto KlmVs; } goto IfYLx; dwajO: $path = $trash["\160\x61\x74\150"]; goto gxxW4; KlWU1: $trash = $this->db->select($this->table)->where(array("\151\144", "\x3d", $id))->get(); goto dwajO; tVBn7: goto RCTg1; goto uBNI7; IfYLx: $this->_rmdir("\56\x2e\x2f" . $path); goto b4NCG; O1hix: $error[] = $trash["\x74\151\164\x6c\145"]; goto tVBn7; gxxW4: if ($this->db->delete($this->table, array("\151\144", "\x3d", $id))->is()) { goto k4T1R; } goto O1hix; b4NCG: KlmVs: goto SYzAL; uBNI7: k4T1R: goto OSkDX; l7Ic4: kDgg7: goto vi5Kn; vi5Kn: } goto ANd5T; dQWIe: return $this->error(); goto oDl_q; DimNu: QcUZ0: goto dXKID; gDaFZ: $error = array(); goto PYWDx; oDl_q: goto QcUZ0; goto rDvLf; dXKID: } protected function postReplay($request_data) { goto ZEO2L; WTWRU: if (count($error) === 0) { goto bXmcH; } goto S2VkX; XxmV9: return $this->success(); goto KA95S; S2VkX: $this->db->rollBack(); goto hY279; ZEO2L: $error = array(); goto XxB6A; hY279: return $this->error(); goto SpGAK; JTZQZ: foreach ($ids as $id) { goto pOEkd; swQwS: $this->db->delete($this->table, array("\x69\144", "\75", $id)); goto nhOJe; nhOJe: goto kCjgO; goto t5sG3; iCMZJ: kCjgO: goto As1RJ; t5sG3: gNTJY: goto J3pju; v0hXW: if ($isadd === false) { goto gNTJY; } goto swQwS; pn2G3: $isadd = $this->db->insert($table, json_decode($trash["\x64\x61\x74\x61"], true)); goto v0hXW; pOEkd: $trash = $this->db->select($this->table)->where(array("\151\144", "\75", $id))->get(); goto EW1d0; As1RJ: w33sz: goto ojwAw; EW1d0: $table = $trash["\164\x61\x62\154\x65"]; goto pn2G3; J3pju: $error[] = $trash["\x74\x69\x74\154\145"]; goto iCMZJ; ojwAw: } goto vw_m7; SpGAK: goto UgXPn; goto lGy_C; WHKty: $this->db->commit(); goto Y7tsH; KA95S: UgXPn: goto nl4Tb; C_8gG: $this->db->beginTransaction(); goto JTZQZ; XxB6A: $ids = $request_data["\151\x64"]; goto C_8gG; vw_m7: xZVxq: goto WTWRU; Y7tsH: $this->_log("\x72\145\x70\154\x79", array("\x74\x69\x74\154\145" => count($ids))); goto XxmV9; lGy_C: bXmcH: goto WHKty; nl4Tb: } }
